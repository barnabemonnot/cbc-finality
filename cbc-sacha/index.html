<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="general.css"/>
    <link rel="stylesheet" type="text/css" href="index.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
    <script src="libs/katex/katex.min.js"></script>
    <script src="libs/underscore.min.js"></script>
    <script src="libs/react.development.js"></script>
    <script src="libs/react-dom.development.js"></script>
    <script src="libs/d3v4+jetpack.js"></script>
    <script src="libs/graph-scroll.js"></script>
    <script src="hack.js"></script>
    <script src="src/component-library.js"></script>
  </head>
  <body>
    <div class="document-container">
      <div class="title-container">
        <div class="title">
          Finality in CBC Casper
        </div>
        <div class="sub-title">
      	  Checking for finality in a set of messages.
      	</div>
      </div>

      <section class="abstract">
        On to the finals!!!
      </section>

      <div id="toc-author-block" style="display: flex">
        <div id="authors"></div>
        <div id="toc"></div>
      </div>
    </div>
    <div>

      <section class="introduction">

	<div>
	  <h2>Here is the problem</h2>
	  In blockchains we care about adding some notion of “finality” - the idea that some block can be so firmly established in the chain that it cannot be overtaken by a competing block unless a very large portion (eg. 1/4) of validators commit a uniquely attributable fault - act in some way which is clearly and cryptographically verifiably malicious.
	</div>

	<div>
	  <h2>Here's why it's interesting</h2>
	  Finality is a very significant advancement: once a block is finalized, it is secure regardless of network latency (unlike confirmations in PoW), and reverting the block requires >= x% of validators to cheat in a way that's detectable and can be used to destroy their deposits.
	  <p>
	    There are many different approaches to finality, but the two important ones within the ethereum ecosystem are Casper FFG and Casper CBC. Here we'll be focusing on CBC
	  </p>
	</div>

	<div>
	  <h2>What exactly are we focusing on?</h2>
	  Specifically, we'll be implementing a finality oracle -- a set of heuristics that allow us to detect some of the cases where a block is final under CBC Casper.
	  <p>
	    But before we do that, let's take a look at why finality is not trivial to detect.
	  </p>
	</div>

      </section>
  
      <div class="scroll-container">

	<div id="graph">
	  <svg id="intro-svg" viewBox="0 0 400 300"></svg>
	</div>

	<div id="scroll-sections">
	  <div class="epoch">
	    Imagine we have three nodes -- A, B and C -- executing a simple binary consensus protocol -- in other words sending messages containing either 0 or 1. And imagine we are using the following intuitive (but alas incorrect) finality oracle: a value is finalized if all nodes propose that same value in their latest messages.
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	  <div class="epoch">
	  </div>

	</div>
      </div>
    </div>

    <script>
    let authorData = [{
      name: "Aditya Asgaonkar",
      affiliation: "Ethereum Foundation"
    }, {
        name: "Barnabé Monnot",
        affiliation: "hackingresear.ch"
      }, {
        name: "Sacha Yves Saint-Léger",
        affiliation: "hackingresear.ch"
      }]
      </script>
      <script src="src/authorFormatting.js"></script>
      <script src="src/sectionFormatting.js"></script>
      <script src="src/referencesFormatting.js"></script>
      <script src="src/figureFormatting.js"></script>
      <script src="src/mathFormatting.js"></script>
  </body>
</html>
